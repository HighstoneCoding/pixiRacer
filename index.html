<!DOCTYPE HTML>
<html>
<head>
    <title>pixiRacer by beanfarmer</title>
    <style>
    body{
      margin: 0;
      padding: 0;
      background-color: #000000;
    }
    </style>
    <script src="http://jeremyckahn.github.io/keydrown/dist/keydrown.js"></script>
    <script src="bin/pixi.dev.js"></script>
</head>
<body>
  <script>
    var MAXSPEED = 2.0;
    var MINSPEED = -2.0;

    var stage = new PIXI.Stage(0xffffff);
    var render = PIXI.autoDetectRenderer(640, 480);
    document.body.appendChild(render.view);
    var carTexture = PIXI.Texture.fromImage('img/car.png'); // player sprite is loaded in as a texture
    var enCarTexture = PIXI.Texture.fromImage('img/car2.png');
    var car = new PIXI.Sprite(carTexture); // player sprite texture is then loaded to a sprite
    var enCar = new PIXI.Sprite(enCarTexture);

    var speedY = 0.0;
    var speedX = 0.0;

    enCar.anchor.x = 0.5;
    enCar.anchor.y = 0.5;

    car.anchor.x = 0.5; // this sets the center of the image to be its 0,0
    car.anchor.y = 0.5;

    enCar.position.x = 150;
    enCar.position.y = 200;

    car.position.x = 70;
    car.position.y = 240;

    stage.addChild(car); // need to add our sprites to the stage
    stage.addChild(enCar);

    requestAnimFrame(Loop);

    function accelerate(){ // fix me
      if(speedY < MAXSPEED){
          speedY -= 0.2;
      }
    }

    function useBreaks(){
      if(speedY > MINSPEED){
        speedY += 0.2;
      }
    }

    function moveLeft(){
      if(speedX < MAXSPEED){
        speedX -= 0.2;
      }
    }

    function moveRight(){
      if(speedX > MINSPEED){
        speedX+= 0.2;
      }
    }

    kd.UP.down(accelerate);
    kd.DOWN.down(useBreaks);
    kd.LEFT.down(moveLeft);
    kd.RIGHT.down(moveRight);

    function slowDown(){
      if(speedY > 0.0){
        speedY -= 0.05;
      }

      else if(speedY < 0.0){
        speedY += 0.05;
      }

      if(speedX > 0.0){
        speedX -= 0.05;
      }

      else if(speedX < 0.0){
        speedX += 0.05;
      }
    }

    function boundsCheck(){ // someone add me please

    }

    function Loop(){
      kd.tick(); // keyboard listener if you like
      requestAnimFrame(Loop); //update the screen
      slowDown(); //
      car.position.y += speedY;
      car.position.x += speedX;
      boundsCheck();
      render.render(stage); //draw the backbuffer to the screen
    }

  </script>
</body>
</html>
