<!DOCTYPE HTML>
<html>
<head>
    <title>pixiRacer by beanfarmer</title>
    <style>
    body{
      margin: 0;
      padding: 0;
      background-color: #000000;
    }
    </style>
    <script src="http://jeremyckahn.github.io/keydrown/dist/keydrown.js"></script>
    <script src="bin/pixi.dev.js"></script>
</head>
<body>
  <script>
    var MAXSPEED = 2.0;
    var MINSPEED = -2.0;

    var stage = new PIXI.Stage(0xffffff);
    var render = PIXI.autoDetectRenderer(640, 480);
    document.body.appendChild(render.view);
    var carTexture = PIXI.Texture.fromImage('img/car.png');
    var car = new PIXI.Sprite(carTexture);

    var speedY = 0.0;
    var speedX = 0.0;

    car.anchor.x = 0.5;
    car.anchor.y = 0.5;

    car.position.x = 70;
    car.position.y = 240;

    stage.addChild(car);

    requestAnimFrame(Loop);

    function accelorate(){
      if(speedY < MAXSPEED){
          speedY -= 0.2;
      }
    }

    function useBreaks(){
      if(speedY > MINSPEED){
        speedY += 0.2;
      }
    }

    function moveLeft(){
      if(speedX < MAXSPEED){
        speedX -= 0.2;
      }
    }

    function moveRight(){
      if(speedX > MINSPEED){
        speedX+= 0.2;
      }
    }

    kd.UP.down(accelorate);
    kd.DOWN.down(useBreaks);
    kd.LEFT.down(moveLeft);
    kd.RIGHT.down(moveRight);

    function Loop(){
      kd.tick();
      requestAnimFrame(Loop);

        if(speedY > 0.0){
          speedY -= 0.1;
        }

        else if(speedY < 0.0){
          speedY += 0.1;
        }

        if(speedX > 0.0){
          speedX -= 0.1;
        }

        else if(speedX < 0.0){
          speedX += 0.1;
        }

      car.position.y += speedY;
      car.position.x += speedX;
      render.render(stage);
    }

  </script>
</body>
</html>
