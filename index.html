<!DOCTYPE HTML>
<html>
<head>
    <title>pixiRacer by beanfarmer</title>
    <style>
    body{
      margin: 0;
      padding: 0;
      background-color: #000000;
    }
    </style>
    <script src="http://jeremyckahn.github.io/keydrown/dist/keydrown.js"></script>
    <script src="bin/pixi.dev.js"></script>
</head>
<body>
  <script>
    var MAXSPEED = 2.0;
    var MINSPEED = -2.0;

    var stage = new PIXI.Stage(0xffffff);
    var render = PIXI.autoDetectRenderer(640, 480);
    document.body.appendChild(render.view);
    var carTexture = PIXI.Texture.fromImage('img/car.png');
    var car = new PIXI.Sprite(carTexture);

    var speed = 0.0;

    car.anchor.x = 0.5;
    car.anchor.y = 0.5;

    car.position.x = 70;
    car.position.y = 240;

    stage.addChild(car);

    requestAnimFrame(Loop);

    function accelorate(){
      if(speed < MAXSPEED){
          speed-=0.2;
      }
    }

    function useBreaks(){
      if(speed > MINSPEED){
        speed+=0.2;
      }
    }

    function rotateLeft(){
      car.rotation -= 0.04;
    }

    function rotateRight(){
      car.rotation += 0.04;
    }

    kd.UP.down(accelorate);
    kd.DOWN.down(useBreaks);
    kd.LEFT.down(rotateLeft);
    kd.RIGHT.down(rotateRight);

    function Loop(){
      kd.tick();
      requestAnimFrame(Loop);

      if(speed > 0.0){
        speed -= 0.1;
      }

      else if(speed < 0.0){
        speed += 0.1;
      }

      car.position.y += speed;
      render.render(stage);
    }

  </script>
</body>
</html>
